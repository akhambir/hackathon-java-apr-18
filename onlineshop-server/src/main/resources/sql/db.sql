CREATE TABLE USERS (
	ID BIGINT AUTO_INCREMENT NOT NULL,
	FIRST_NAME VARCHAR(50) NOT NULL,
	LAST_NAME VARCHAR(50) NOT NULL,
	EMAIL VARCHAR(100) UNIQUE NOT NULL,
	PASSWORD VARCHAR(100) NOT NULL,
	TOKEN VARCHAR(200) NOT NULL,
	CONSTRAINT PK_USER PRIMARY KEY (ID)
);

CREATE TABLE CATEGORIES (
	ID BIGINT AUTO_INCREMENT NOT NULL,
	CATEGORY_NAME VARCHAR(50) NOT NULL,
	DESCRIPTION VARCHAR(200) NOT NULL,
	CONSTRAINT PK_CATEGORY PRIMARY KEY (ID)
);

CREATE TABLE PRODUCTS (
	ID BIGINT AUTO_INCREMENT NOT NULL,
	PRODUCT_NAME VARCHAR(50) NOT NULL,
	PRICE DOUBLE NOT NULL,
	FK_CATEGORY_ID BIGINT NOT NULL,
	CONSTRAINT PK_PRODUCT PRIMARY KEY (ID),
	CONSTRAINT FK_CATEGORY_ID FOREIGN KEY (FK_CATEGORY_ID)
	  REFERENCES CATEGORIES(ID)
);

CREATE TABLE ORDERS (
	ID BIGINT AUTO_INCREMENT NOT NULL,
  FK_USER_ID BIGINT NOT NULL,
	PRICE DOUBLE NOT NULL,
	ORDER_STATUS VARCHAR(20) NOT NULL,
	CREATE_TIME DATETIME NOT NULL,
	PAYMENT_TIME DATETIME,
	CONSTRAINT PK_ORDER PRIMARY KEY (ID),
  CONSTRAINT FK_USER_ID FOREIGN KEY (FK_USER_ID)
	  REFERENCES USERS(ID),
);

CREATE TABLE ORDER_TO_PRODUCT (
  ID BIGINT AUTO_INCREMENT NOT NULL,
  FK_ORDER_ID BIGINT NOT NULL,
  FK_PRODUCT_ID BIGINT NOT NULL,
  QUANTITY BIGINT NOT NULL,
  CONSTRAINT PK_ORDER_TO_PRODUCT PRIMARY KEY (ID),
  CONSTRAINT FK_ORDER_ID FOREIGN KEY (FK_ORDER_ID)
    REFERENCES ORDERS(ID),
  CONSTRAINT FK_PRODUCT_ID FOREIGN KEY (FK_PRODUCT_ID)
    REFERENCES PRODUCTS(ID)
);

CREATE TABLE ROLES (
  ID BIGINT AUTO_INCREMENT NOT NULL,
  ROLE_NAME VARCHAR(15) NOT NULL,
  CONSTRAINT PK_ROLE PRIMARY KEY (ID)
);

CREATE TABLE USER_TO_ROLE (
  ID BIGINT AUTO_INCREMENT NOT NULL,
  FK_USER_ID BIGINT NOT NULL,
  FK_ROLE_ID BIGINT NOT NULL,
    CONSTRAINT PK_USER_TO_ROLE PRIMARY KEY (ID),
    CONSTRAINT FK_UTR_TO_USER FOREIGN KEY (FK_USER_ID)
            REFERENCES USERS(ID),
    CONSTRAINT FK_UTR_TO_ROLE FOREIGN KEY (FK_ROLE_ID)
            REFERENCES ROLES(ID)
);

CREATE TABLE CARTS (
    ID BIGINT AUTO_INCREMENT NOT NULL,
    FK_PRODUCT_ID BIGINT NOT NULL,
    FK_USER_ID BIGINT,
    TEMP_TOKEN VARCHAR(255),
    CONSTRAINT PK_CART PRIMARY KEY (ID),
    CONSTRAINT FK_C_TO_PRODUCTS FOREIGN KEY (FK_PRODUCT_ID)
    REFERENCES PRODUCTS(ID),
    CONSTRAINT FK_C_TO_USERS FOREIGN KEY (FK_USER_ID)
    REFERENCES USERS(ID)
  );
